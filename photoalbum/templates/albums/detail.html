{% extends 'base.html' %}

{% block title %}{{ photo.name }}{% endblock %}

{% block content %}
<div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h2>{{ photo.name }}</h2>
        {% if user == photo.user %}
            <form action="{% url 'photo_delete' photo.id %}" method="post" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger" onclick="return confirm('Biztosan törölni szeretnéd ezt a képet?');">Törlés</button>
            </form>
        {% endif %}
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h4>Eredeti kép</h4>
                <img src="{{ photo.image.url }}" class="img-fluid mb-3" alt="{{ photo.name }}">
            </div>
            <div class="col-md-6">
                <h4>Feldolgozott kép</h4>
                {% if photo.processed_image %}
                    <img src="{{ photo.processed_image.url }}" class="img-fluid mb-3" alt="Feldolgozott {{ photo.name }}">
                    <p class="text-success">Észlelt személyek száma: {{ photo.detected_persons }}</p>
                {% else %}
                    <p class="text-muted">A kép még nincs feldolgozva.</p>
                {% endif %}
            </div>
        </div>
        {% if photo.description %}
            <div class="mt-3">
                <h4>Leírás</h4>
                <p>{{ photo.description }}</p>
            </div>
        {% endif %}
    </div>
    <div class="card-footer text-muted">
        Feltöltve: {{ photo.upload_date|date:"Y-m-d H:i" }}<br>
        Feltöltő: {{ photo.user.username }}
    </div>
</div>
<a href="{% url 'photo_list' %}" class="btn btn-primary">Vissza a listához</a>
{% endblock %}